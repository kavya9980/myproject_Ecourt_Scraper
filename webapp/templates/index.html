
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>eCourts Scraper - Case Information System</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-bg: #f8f9fa;
            --border-color: #dee2e6;
        }
        body {
            background-color: var(--light-bg);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .header-section {
            background: linear-gradient(135deg, var(--primary-color), #1a2530);
            color: white;
            padding: 2rem 0;
            border-radius: 0 0 10px 10px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            transition: transform 0.3s ease;
            margin-bottom: 1.5rem;
        }
        .card:hover {
            transform: translateY(-5px);
        }
        .card-header {
            background-color: white;
            border-bottom: 1px solid var(--border-color);
            font-weight: 600;
            padding: 1rem 1.25rem;
            border-radius: 10px 10px 0 0 !important;
        }
        .form-section {
            padding: 1.5rem;
        }
        .btn-primary {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
            padding: 0.75rem 1.5rem;
            font-weight: 600;
            border-radius: 6px;
        }
        .btn-primary:hover {
            background-color: #2980b9;
            border-color: #2980b9;
        }
        .btn-secondary {
            background-color: #6c757d;
            border-color: #6c757d;
        }
        .captcha-container {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
            border: 1px solid var(--border-color);
        }
        .captcha-image {
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 5px;
            background-color: white;
        }
        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 1rem 0;
        }
        .checkbox-item {
            display: flex;
            align-items: center;
            background: #f1f8ff;
            padding: 8px 15px;
            border-radius: 6px;
            border: 1px solid #d1e3ff;
        }
        .form-control {
            border-radius: 6px;
            padding: 0.75rem;
            border: 1px solid var(--border-color);
        }
        .form-control:focus {
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 0.2rem rgba(52, 152, 219, 0.25);
        }
        .results-section, .errors-section {
            margin-top: 2rem;
        }
        .list-group-item {
            border-left: 4px solid var(--secondary-color);
            margin-bottom: 0.5rem;
            border-radius: 4px;
        }
        .list-group-item-danger {
            border-left-color: var(--accent-color);
        }
        .alert {
            border-radius: 8px;
            border: none;
        }
        .loading {
            display: none;
            text-align: center;
            padding: 2rem;
        }
        .spinner {
            width: 3rem;
            height: 3rem;
        }
    </style>
</head>
<body>
    <div class="header-section">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1><i class="fas fa-balance-scale mr-2"></i>eCourts Scraper</h1>
                    <p class="lead mb-0">Access case information from Indian courts</p>
                </div>
                <div class="col-md-4 text-md-right">
                    <span class="badge badge-light p-2"><i class="fas fa-info-circle mr-1"></i> Secure & Official Data</span>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="row">
            <div class="col-lg-8">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <span>Case Information Form</span>
                        <small class="text-muted">Fields marked with * are required</small>
                    </div>
                    <div class="form-section">
                        <form method="POST" action="/" id="caseForm">
                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <label for="cnr">CNR Number</label>
                                    <input type="text" class="form-control" id="cnr" name="cnr" placeholder="e.g., GJHC240000012025">
                                    <small class="form-text text-muted">Unique Case Number Record</small>
                                </div>
                                <div class="form-group col-md-6">
                                    <label for="state" class="required">State</label>
                                    <select class="form-control" id="state" name="state" required>
                                        <option value="">Select State</option>
                                        {% for state in states %}
                                            <option value="{{ state }}">{{ state }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <label for="district" class="required">District</label>
                                    <select class="form-control" id="district" name="district" required>
                                        <option value="">Select District</option>
                                    </select>
                                </div>
                                <div class="form-group col-md-6">
                                    <label for="court" class="required">Court</label>
                                    <select class="form-control" id="court" name="court" required>
                                        <option value="">Select Court</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-md-4">
                                    <label for="case_type">Case Type</label>
                                    <input type="text" class="form-control" id="case_type" name="case_type" placeholder="e.g., WP">
                                </div>
                                <div class="form-group col-md-4">
                                    <label for="case_number">Case Number</label>
                                    <input type="text" class="form-control" id="case_number" name="case_number" placeholder="e.g., 12345">
                                </div>
                                <div class="form-group col-md-4">
                                    <label for="year">Year</label>
                                    <input type="text" class="form-control" id="year" name="year" placeholder="e.g., 2025">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="captcha-container">
                                    <label for="captcha_code" class="required">CAPTCHA Verification</label>
                                    {% if captcha_url %}
                                        <div class="d-flex align-items-center mb-2">
                                            <img src="{{ captcha_url }}" alt="CAPTCHA Image" class="captcha-image mr-3">
                                            <button type="submit" formaction="/refresh_captcha" class="btn btn-outline-secondary">
                                                <i class="fas fa-redo-alt"></i> Refresh
                                            </button>
                                        </div>
                                        <input type="text" class="form-control" id="captcha_code" name="captcha_code" placeholder="Enter CAPTCHA code" required>
                                        <small class="form-text text-muted">Enter the text shown in the image above</small>
                                    {% else %}
                                        <p class="text-muted">Failed to load CAPTCHA image. Click Refresh CAPTCHA to try again.</p>
                                        <button type="submit" formaction="/refresh_captcha" class="btn btn-secondary mt-2">Refresh CAPTCHA</button>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Additional Options</label>
                                <div class="checkbox-group">
                                    <div class="checkbox-item">
                                        <input type="checkbox" class="form-check-input" id="today" name="today">
                                        <label class="form-check-label ml-2" for="today">Check Today</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" class="form-check-input" id="tomorrow" name="tomorrow">
                                        <label class="form-check-label ml-2" for="tomorrow">Check Tomorrow</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" class="form-check-input" id="causelist" name="causelist">
                                        <label class="form-check-label ml-2" for="causelist">Download Cause List</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" class="form-check-input" id="download_pdf" name="download_pdf">
                                        <label class="form-check-label ml-2" for="download_pdf">Download Case PDF</label>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex justify-content-between mt-4">
                                <button type="reset" class="btn btn-outline-secondary">
                                    <i class="fas fa-undo-alt"></i> Reset Form
                                </button>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-search"></i> Search Case Information
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="loading" id="loadingIndicator">
                    <div class="spinner-border text-primary spinner" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                    <p class="mt-3">Searching for case information. This may take a moment...</p>
                </div>
                {% if results %}
                <div class="card results-section">
                    <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
                        <span><i class="fas fa-check-circle mr-2"></i>Case Details Found</span>
                        <span class="badge badge-light">{{ results|length }} items</span>
                    </div>
                    <div class="card-body">
                        <ul class="list-group">
                            {% for result in results %}
                                <li class="list-group-item">{{ result }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
                {% endif %}
                {% if errors %}
                <div class="card errors-section">
                    <div class="card-header bg-danger text-white">
                        <i class="fas fa-exclamation-triangle mr-2"></i>Errors
                    </div>
                    <div class="card-body">
                        <ul class="list-group">
                            {% for error in errors %}
                                <li class="list-group-item list-group-item-danger">{{ error }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
                {% endif %}
                {% if error %}
                <div class="alert alert-danger errors-section">
                    <h4><i class="fas fa-exclamation-circle mr-2"></i>Error</h4>
                    <p class="mb-0">{{ error }}</p>
                </div>
                {% endif %}
            </div>
            <div class="col-lg-4">
                <div class="card mb-4">
                    <div class="card-header">
                        <i class="fas fa-info-circle mr-2"></i>About This Tool
                    </div>
                    <div class="card-body">
                        <p>This tool helps you retrieve case information from the eCourts services of India.</p>
                        <p>Enter the required case details to fetch information such as case status, hearing dates, orders, and judgments.</p>
                        <hr>
                        <h6>Features:</h6>
                        <ul>
                            <li>Case status tracking</li>
                            <li>Hearing date information</li>
                            <li>Cause list download</li>
                            <li>PDF document retrieval</li>
                        </ul>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-question-circle mr-2"></i>Help & Support
                    </div>
                    <div class="card-body">
                        <h6>What is a CNR number?</h6>
                        <p class="small">The CNR (Case Number Record) is a unique 16-digit number assigned to each case filed in Indian courts.</p>
                        <h6>Where can I find my case details?</h6>
                        <p class="small">Your case details are typically available on your case filing receipt or from your legal representative.</p>
                        <h6>Need assistance?</h6>
                        <p class="small">Contact the eCourts helpdesk or your court's registry for technical support with case information.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class="bg-dark text-light py-4 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5>eCourts Scraper</h5>
                    <p class="mb-0">A tool for accessing Indian court case information.</p>
                </div>
                <div class="col-md-6 text-md-right">
                    <p class="mb-0">&copy; 2025 eCourts Scraper. For demonstration purposes only.</p>
                </div>
            </div>
        </div>
    </footer>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        $(document).ready(function() {
            // Form submission handler
            $('#caseForm').on('submit', function() {
                $('#loadingIndicator').show();
            });

            // Populate districts based on state
            $('#state').change(function() {
                const state = $(this).val();
                if (state === 'Other') {
                    $('#district').replaceWith('<input type="text" class="form-control" id="district" name="district" placeholder="Enter district name" required>');
                    $('#court').replaceWith('<input type="text" class="form-control" id="court" name="court" placeholder="Enter court name" required>');
                } else {
                    $.getJSON('/get_districts/' + state, function(data) {
                        $('#district').html('<option value="">Select District</option>');
                        data.forEach(function(district) {
                            $('#district').append('<option value="' + district + '">' + district + '</option>');
                        });
                    });
                    $.getJSON('/get_courts/' + state, function(data) {
                        $('#court').html('<option value="">Select Court</option>');
                        data.forEach(function(court) {
                            $('#court').append('<option value="' + court + '">' + court + '</option>');
                        });
                    });
                }
            });

            // Form validation
            $('#caseForm').on('submit', function(e) {
                let isValid = true;
                $('.required').each(function() {
                    const input = $(this).find('input, select');
                    if (input.length && !input.val().trim()) {
                        isValid = false;
                        input.addClass('is-invalid');
                    } else {
                        input.removeClass('is-invalid');
                    }
                });

                // Check CNR or Case Type/Number/Year
                const cnr = $('#cnr').val().trim();
                const caseType = $('#case_type').val().trim();
                const caseNumber = $('#case_number').val().trim();
                const year = $('#year').val().trim();
                if (!cnr && !(caseType && caseNumber && year)) {
                    isValid = false;
                    $('#cnr, #case_type, #case_number, #year').addClass('is-invalid');
                    alert('Please provide either a CNR number or Case Type, Case Number, and Year.');
                }

                if (!isValid) {
                    e.preventDefault();
                    alert('Please fill in all required fields or provide valid case details.');
                    $('#loadingIndicator').hide();
                }
            });

            // Handle reset form
            $('#caseForm').on('reset', function() {
                $('.form-control').removeClass('is-invalid');
                $('#district').html('<option value="">Select District</option>');
                $('#court').html('<option value="">Select Court</option>');
            });
        });
    </script>
</body>
</html>
